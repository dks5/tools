<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Установка и настройка XRay Core</title>
  
  <style>
    /* --- НАЧАЛО БЛОКА: Определение глобальных CSS-переменных (Custom Properties) --- */
    /* Этот блок позволяет легко изменять основные параметры стиля (цвета, размеры) в одном месте. */
    :root {
      --main-blue: #2c72c7;          /* Определяет основную переменную для синего цвета (для заголовков, ссылок). */
      --light-blue: #e6f0fb;         /* Определяет переменную для светло-голубого цвета (для фона блоков). */
      --bg-color: #ffffff;           /* Определяет переменную для цвета фона всей страницы (белый). */
      --text-color: #333333;         /* Определяет переменную для основного цвета текста (темно-серый). */
      --code-bg: #f5f5f5;             /* Определяет переменную для фона блоков с кодом (светло-серый). */
      --border-radius: 8px;          /* Определяет переменную для радиуса скругления углов у блоков. */
      --page-width: 500px;           /* Определяет переменную для максимальной ширины контента на странице. */
    }
    /* --- КОНЕЦ БЛОКА: Определение глобальных CSS-переменных --- */


    /* --- НАЧАЛО БЛОКА: Базовые стили для всей страницы (body) --- */
    /* Здесь задаются основные параметры для всего документа. */
    body {
      font-family: "Segoe UI", sans-serif; /* Устанавливает основной шрифт для текста с запасным вариантом. */
      background-color: var(--bg-color);   /* Задает цвет фона страницы, используя переменную. */
      color: var(--text-color);            /* Задает основной цвет текста, используя переменную. */
      line-height: 1.6;                    /* Устанавливает межстрочный интервал для лучшей читаемости. */
      padding: 20px;                       /* Добавляет внутренний отступ со всех сторон тега <body>. */
      margin: 0;                           /* Убирает внешний отступ по умолчанию у тега <body>. */
    } до
    /* --- КОНЕЦ БЛОКА: Базовые стили для всей страницы (body) --- */


    /* --- НАЧАЛО БЛОКА: Стили для основного контейнера-обертки --- */
    /* Этот класс ограничивает ширину контента и центрирует его. */
    .container {
      max-width: var(--page-width);      /* Устанавливает максимальную ширину контента, используя переменную. */
      margin: auto;                      /* Автоматически вычисляет боковые отступы для центрирования блока. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для основного контейнера-обертки --- */


    /* --- НАЧАЛО БЛОКА: Стили для заголовков --- */
    /* Общие и индивидуальные стили для заголовков h1, h2, h3. */
    h1, h2, h3 {
      color: var(--main-blue);           /* Задает всем заголовкам синий цвет, используя переменную. */
    }

    h1 {
      font-size: 2em;                    /* Устанавливает размер шрифта для заголовка первого уровня (в 2 раза больше базового). */
      margin-top: 0;                     /* Убирает верхний отступ у главного заголовка страницы. */
    }

    h2 {
      border-bottom: 2px solid var(--light-blue); /* Добавляет светло-голубую линию под заголовком второго уровня. */
      padding-bottom: 5px;               /* Добавляет небольшой отступ снизу, между текстом заголовка и линией. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для заголовков --- */


    /* --- НАЧАЛО БЛОКА: Стили для оберток команд и интерактивных элементов --- */
    /* Эти стили применяются к блокам, содержащим команды и чекбоксы. */
    .checkbox-item, .command-wrapper {
      background: var(--light-blue);     /* Задает светло-голубой фон, используя переменную. */
      padding: 10px;                     /* Добавляет внутренние отступы со всех сторон. */
      border-radius: var(--border-radius); /* Скругляет углы блока, используя переменную. */
      margin: 10px 0;                    /* Добавляет внешние отступы сверху и снизу. */
    }

    label {
      font-weight: bold;                 /* Делает текст меток (подписей) жирным. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для оберток команд и интерактивных элементов --- */


    /* --- НАЧАЛО БЛОКА: Стили для иконки информации и всплывающей подсказки (Tooltip) --- */
    /* Описывает внешний вид и поведение интерактивной иконки с подсказкой. */
    .info-icon {
      margin-left: 8px;                  /* Добавляет небольшой отступ слева от иконки. */
      cursor: help;                      /* Меняет курсор на знак вопроса при наведении. */
      position: relative;                /* Устанавливает относительное позиционирование для дочерних абсолютных элементов. */
      display: inline-block;             /* Позволяет элементу иметь блочные свойства (ширину, высоту), но оставаться в строке. */
      font-style: normal;                /* Убирает курсивное начертание, если оно есть по умолчанию. */
      color: #555;                       /* Задает цвет для иконки. */
    }

    .info-icon:hover .tooltip {
      display: block;                    /* Показывает всплывающую подсказку (.tooltip) при наведении на родителя (.info-icon). */
    }

    .tooltip {
      display: none;                     /* По умолчанию всплывающая подсказка скрыта. */
      position: absolute;                /* Позиционирует подсказку относительно родительского элемента (.info-icon). */
      top: 120%;                         /* Располагает подсказку на 120% высоты родителя (чуть ниже). */
      left: 0;                           /* Выравнивает подсказку по левому краю родительского элемента. */
      background-color: #333;            /* Задает темный фон для подсказки. */
      color: #fff;                       /* Задает белый цвет текста для подсказки. */
      padding: 5px 10px;                 /* Добавляет внутренние отступы для текста в подсказке. */
      border-radius: 5px;                /* Скругляет углы подсказки. */
      font-size: 0.875em;                /* Устанавливает размер шрифта чуть меньше основного. */
      white-space: nowrap;               /* Запрещает перенос текста на новую строку. */
      z-index: 1;                        /* Устанавливает порядок наложения, чтобы подсказка была поверх других элементов. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для иконки информации и всплывающей подсказки (Tooltip) --- */


    /* --- НАЧАЛО БЛОКА: Стили для блоков с кодом --- */
    /* Форматирование контейнеров для отображения примеров кода. */
    .code-block {
      background-color: var(--code-bg);  /* Задает фон для блока с кодом, используя переменную. */
      padding: 10px 100px 10px 10px;      /* Добавляет внутренние отступы. */
      border-radius: var(--border-radius); /* Скругляет углы, используя переменную. */
      position: relative;                /* Устанавливает относительное позиционирование для позиционирования кнопки "Копировать". */
      margin: 10px 0;                    /* Добавляет внешние отступы сверху и снизу. */
    }

    /* --- ИЗМЕНЕННЫЙ БЛОК --- */
    pre {
      margin: 0;                         /* Убирает внешние отступы по умолчанию у тега <pre>. */
      white-space: pre-wrap;             /* Включает перенос строк, чтобы код не выходил за пределы блока по ширине. */
      overflow-wrap: break-word;         /* Переносит очень длинные слова или строки (например, URL), которые не помещаются в контейнер. */
    }
    /* --- КОНЕЦ ИЗМЕНЕННОГО БЛОКА --- */

    .copy-btn {
      position: absolute;                /* Абсолютное позиционирование относительно родительского .code-block. */
      top: 10px;                         /* Отступ 10px от верхнего края родителя. */
      right: 10px;                       /* Отступ 10px от правого края родителя. */
      padding: 5px 10px;                 /* Внутренние отступы для кнопки. */
      font-size: 0.8em;                  /* Уменьшенный размер шрифта для текста на кнопке. */
      background: var(--main-blue);      /* Синий фон для кнопки, используя переменную. */
      color: white;                      /* Белый цвет текста на кнопке. */
      border: none;                      /* Убирает рамку у кнопки. */
      border-radius: 4px;                /* Немного скругляет углы кнопки. */
      cursor: pointer;                   /* Меняет курсор на "указатель" при наведении. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для блоков с кодом --- */


    /* --- НАЧАЛО БЛОКА: Стили для списков и ссылок --- */
    /* Базовое форматирование для маркированных списков и гиперссылок. */
    ul {
      padding-left: 20px;                /* Добавляет отступ слева для маркированного списка, отодвигая его от края. */
    }

    a {
      color: var(--main-blue);           /* Задает синий цвет для всех ссылок, используя переменную. */
    }
    /* --- КОНЕЦ БЛОКА: Стили для списков и ссылок --- */
  </style>

</head>
<body>

  <div class="container">
    <h1>Установка и настройка XRay Core</h1>

    <h2>1. Заказ VPS-сервера</h2>
    <p>Для начала закажите сервер у провайдера (например, ISHosting). Подходит тариф "Лайт" с локацией как можно ближе к вам (например, Финляндия). Выберите Ubuntu 22.04 x64. После оплаты вы получите доступ на почту.</p>

    <h2>2. Подключение к серверу</h2>
    <p>Подключитесь к серверу через SSH. В Windows удобно использовать <a href="https://mobaxterm.mobatek.net/" target="_blank">MobaxTerm</a>.</p>
    <div class="code-block">
      <pre><code>ssh root@&lt;IP_сервера&gt;</code></pre>
      <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
    </div>

    <h2>3. Смена пароля</h2>
    <p>Сначала сгенерируйте пароль:</p>
    <div class="code-block">
      <pre><code>openssl rand -base64 32</code></pre>
      <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
    </div>
    <p>Затем задайте его:</p>
    <div class="code-block">
      <pre><code>passwd</code></pre>
      <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
    </div>

    <h2>4. Установка скрипта XRay</h2>
    <div class="code-block">
      <pre><code>wget -qO- https://raw.githubusercontent.com/ServerTechnologies/simple-xray-core/refs/heads/main/xray-install | bash</code></pre>
      <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
    </div>

    <h2>5. Команды для управления пользователями</h2>

    <div class="command-wrapper">
      <label><input type="checkbox"> Вывести список всех клиентов</label>
      <div class="code-block">
        <pre><code>userlist</code></pre>
        <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
      </div>
    </div>

    <div class="command-wrapper">
      <label><input type="checkbox"> Создать нового пользователя</label>
      <div class="code-block">
        <pre><code>newuser</code></pre>
        <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
      </div>
    </div>

    <div class="command-wrapper">
      <label><input type="checkbox"> Удалить пользователя</label>
      <div class="code-block">
        <pre><code>rmuser</code></pre>
        <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
      </div>
    </div>

    <div class="command-wrapper">
      <label><input type="checkbox"> Получить ссылку подключения</label>
      <div class="code-block">
        <pre><code>sharelink</code></pre>
        <button class="copy-btn" onclick="copyCode(this)">Копировать</button>
      </div>
    </div>

    <h2>6. Полезные ссылки</h2>
    <ul>
      <li><a href="https://github.com/XTLS/Xray-core" target="_blank">GitHub проекта XRay</a></li>
      <li><a href="https://xtls.github.io/ru/" target="_blank">Официальная документация на русском</a></li>
    </ul>
  </div>

  <script>
    // Объявляется функция с именем 'copyCode', которая принимает один аргумент 'button'.
    // Этот аргумент — это HTML-элемент кнопки, на которую нажал пользователь.
    function copyCode(button) {

      // Находим элемент, который находится непосредственно перед кнопкой в HTML-структуре.
      // В данном случае это тег <pre>. Из этого элемента мы получаем его текстовое содержимое (.innerText).
      // Этот текст (команда) сохраняется в константу 'code'.
      const code = button.previousElementSibling.innerText;

      // Используем встроенный в браузер API 'Clipboard' для работы с буфером обмена.
      // Метод 'writeText(code)' пытается асинхронно записать текст из переменной 'code' в буфер обмена.
      // '.then(...)' — это Promise, который выполнится, если копирование прошло успешно.
      navigator.clipboard.writeText(code).then(() => {

        // Если копирование успешно, меняем текст на кнопке на "Скопировано!".
        // Это дает пользователю визуальное подтверждение действия.
        button.innerText = "Скопировано!";

        // Запускаем таймер. Функция setTimeout выполнит код внутри себя через 1500 миллисекунд (1.5 секунды).
        // Это нужно, чтобы вернуть текст кнопки в исходное состояние.
        setTimeout(() => button.innerText = "Копировать", 1500);
        
      });
    }
  </script>

</body>
</html>
